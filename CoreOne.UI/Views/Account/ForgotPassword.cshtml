@{
    Layout = "_LoginLayout";
}
<div class="container mt-4">
    <h4>Forgot Password</h4>
    <input id="txtEmail" class="form-control mb-2" placeholder="Enter your email" />
    <button id="btnForgot" class="btn btn-primary">Send Reset Link</button>
    <p id="msg" class="text-success mt-2"></p>
</div>

<script>
    $("#btnForgot").click(function () {
        const email = $("#txtEmail").val().trim();

        if (email === "") {
            $("#msg").removeClass("text-success").addClass("text-danger").text("Please enter your email address.");
            return;
        }

        $.ajax({
            url: '/Account/ForgotPassword',
            method: 'POST',
            data: JSON.stringify(email),
            contentType: 'application/json',
            beforeSend: function () {
                $("#btnForgot").prop("disabled", true).text("Sending...");
                $("#msg").removeClass("text-danger text-success").text("");
            },
            success: function (r) {
                if (r.success) {
                    $("#msg").removeClass("text-danger").addClass("text-success").text(r.message);
                } else {
                    $("#msg").removeClass("text-success").addClass("text-danger").text(r.message || "Something went wrong.");
                }
            },
            error: function () {
                $("#msg").removeClass("text-success").addClass("text-danger").text("Error sending reset email. Try again later.");
            },
            complete: function () {
                $("#btnForgot").prop("disabled", false).text("Send Reset Link");
            }
        });
    });
</script>
