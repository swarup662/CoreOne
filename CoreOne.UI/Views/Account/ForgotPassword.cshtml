@{
    Layout = "_LoginLayout";
}
<style>
    /* ============================================================
           🔵 MEDIUM DARK METALLIC BLUE BACKGROUND
        ============================================================ */
    body.authentication-bg-pattern {
        background: radial-gradient(circle at 20% 20%, rgba(150,170,200,0.18), rgba(0,0,0,0) 55%), radial-gradient(circle at 80% 80%, rgba(120,150,190,0.18), rgba(0,0,0,0) 60%), linear-gradient(130deg, #2b3440 0%, #374250 35%, #455267 60%, #2c3542 100%), repeating-linear-gradient( 90deg, rgba(255,255,255,0.05) 0px, rgba(255,255,255,0.05) 2px, rgba(0,0,0,0.12) 2px, rgba(0,0,0,0.12) 5px );
        background-size: cover;
        background-attachment: fixed;
        color: #dbe2ec;
    }

    /* ============================================================
           🔵 Metallic Card — Compact + Steel
        ============================================================ */
    .bg-pattern {
        background: linear-gradient(145deg, #d5dbe3, #afb9c5);
        border: 1px solid #8c9aab;
        border-radius: 12px;
        box-shadow: 0 10px 26px rgba(0,0,0,0.35), inset 0 2px 4px rgba(255,255,255,0.7), inset 0 -2px 4px rgba(0,0,0,0.35);
        padding: 10px !important;
    }

    /* ============================================================
           🔵 Inputs — Metallic
        ============================================================ */
    .form-control {
        background: linear-gradient(145deg, #ffffff, #e5e7ec);
        border: 1px solid #9aa6b3;
        height: 36px;
        border-radius: 8px;
        color: #1d2733;
        font-size: 14px;
    }

        .form-control:focus {
            border-color: #5d9cff;
            box-shadow: 0 0 8px #5d9cff55;
        }

    /* Compact spacing */
    .mb-3 {
        margin-bottom: 8px !important;
    }

    .card-body {
        padding: 4px !important;
    }

    .form-label {
        font-weight: 600;
        color: #26303c;
        font-size: 14px;
    }

    /* ============================================================
           🔵 Button — Metallic Steel Blue
        ============================================================ */
    #btnForgot,
    .btn-pink {
        background: linear-gradient(135deg, #4b81d1, #1d4f97);
        border: 1px solid #7ea6df;
        font-weight: 700;
        color: white;
        border-radius: 8px;
        padding: 7px 0;
        transition: 0.25s ease;
        font-size: 14px;
    }

        #btnForgot:hover,
        .btn-pink:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 18px rgba(0,0,0,0.3);
        }

    /* ============================================================
           🔵 Preloader
        ============================================================ */
    #preloader {
        position: fixed;
        inset: 0;
        background: rgba(15,20,32,0.92);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 2000;
    }

        #preloader.hidden {
            opacity: 0;
            visibility: hidden;
            transition: .6s;
        }

    .loader .spin {
        font-size: 48px;
        color: #6fa4ff;
        animation: spin 2s linear infinite;
    }

    @@keyframes spin {
        100%

    {
        transform: rotate(360deg);
    }

    }

    .text-muted {
        color: #424e5a !important ;
        font-size: 14px;
    }
</style>


<body class="authentication-bg-pattern">

    <!-- PRELOADER -->
    <div id="preloader">
        <div class="loader">
            <i class="fas fa-globe spin"></i>
            <div class="loading-text">Loading...</div>
        </div>
    </div>


    <div class="account-pages mt-5 mb-3">
        <div class="container">
            <div class="row justify-content-center">

                <div class="col-md-8 col-lg-6 col-xl-4">

                    <!-- EMAIL FORM CARD -->
                    <div id="forgotCard" class="card bg-pattern">
                        <div class="card-body">

                            <div class="text-center w-75 m-auto">
                                <h4 class="fw-bold text-dark mb-1" style="color:#16202c !important;">Forgot Password</h4>
                                <p class="text-muted mt-1">
                                    Enter your email and we’ll send you reset instructions.
                                </p>
                            </div>

                            <form>
                                <div class="mb-3">
                                    <label class="form-label">Email Address</label>
                                    <input id="txtEmail" class="form-control" placeholder="Enter your email" />
                                </div>

                                <div class="text-center d-grid mt-3">
                                    <button id="btnForgot" class="btn btn-primary">Send Reset Link</button>
                                    <p id="msg" class="text-success mt-2"></p>
                                </div>
                            </form>

                        </div>
                    </div>


                    <!-- SUCCESS CARD -->
                    <div id="successCard" class="card bg-pattern" style="display:none;">
                        <div class="card-body text-center">

                            <svg width="110px" viewBox="0 0 98 98">
                                <circle cx="49" cy="49" r="49" fill="white"></circle>
                                <circle cx="49" cy="49" r="40" stroke="#1abc9c" stroke-width="6" fill="none"></circle>
                                <polyline points="30,50 45,65 70,35" stroke="#1abc9c" stroke-width="6" fill="none" />
                            </svg>

                            <h3 class="mt-2">Success!</h3>
                            <p class="text-muted font-14 mt-2">
                                An email has been sent to <b id="emailDisplay"></b>.
                                Check your inbox for the reset link.
                            </p>

                            <a href="/Account/Login" class="btn btn-pink w-100 mt-3">Back to Login</a>

                        </div>
                    </div>


                    <!-- FOOTER -->
                    <div class="card bg-pattern mt-2">
                        <div class="card-body p-2 text-center">
                            <p class="text-dark mb-1">
                                Back to <a href="/Account/Login" class="text-primary"><b>Log In</b></a>
                            </p>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>


    <script>
        // Preloader hide on page load
        window.addEventListener('load', function () {
            const preloader = document.getElementById('preloader');
            preloader.classList.add('hidden');
            setTimeout(() => preloader.remove(), 600);
        });
    </script>


    <script>
        $("#btnForgot").click(function (e) {
            e.preventDefault();
            const email = $("#txtEmail").val().trim();

            if (email === "") {
                $("#msg").removeClass("text-success").addClass("text-danger").text("Please enter your email.");
                return;
            }

            $.ajax({
                url: '/Account/ForgotPassword',
                method: 'POST',
                data: JSON.stringify(email),
                contentType: 'application/json',

                beforeSend: function () {
                    $("#btnForgot").prop("disabled", true).text("Sending...");
                    $("#msg").text("");
                },

                success: function (r) {
                    if (r.success) {
                        $("#forgotCard").fadeOut(300, function () {
                            $("#emailDisplay").text(email);
                            $("#successCard").fadeIn(300);
                        });
                    } else {
                        $("#msg").removeClass("text-success").addClass("text-danger")
                            .text(r.message || "Something went wrong.");
                    }
                },

                error: function () {
                    $("#msg").removeClass("text-success").addClass("text-danger")
                        .text("Error sending reset email.");
                },

                complete: function () {
                    $("#btnForgot").prop("disabled", false).text("Send Reset Link");
                }
            });
        });
    </script>

</body>
